<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
    integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
  <!-- 載入 Font Awesome -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/js/all.min.js"></script>
  <style>
    nav.navbar {
      position: fixed;
      top: 0;
      width: 100%;
      z-index: 10;
      opacity: 0.8;
      height: 70px;
    }

    div.container-fluid {
      margin-top: 90px;
    }

    div button.btn {
      width: 100%;
      margin-top: 20px;
    }

    /* -----------------行程內容----------------- */
    div.schedule_content {
      width: 100%;
      height: 750px;
      position: relative;
      border: 1px solid black;
      display: block;
      border-radius: 4px;
    }

    div.schedule_header {
      width: 100%;
      height: 65px;
      position: relative;
      background-color: #E6903B;
      display: block;
    }

    div.schedule_header p {
      font-size: 32px;
      font-weight: bold;
      color: #343434;
      margin-bottom: 0;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }

    div.schedule_header span.plus {
      position: absolute;
      top: 50%;
      right: 1%;
      transform: translate(-50%, -50%);
    }

    div.schedule_body {
      display: block;
      height: calc(100% - 65px);
      position: relative;
      overflow-y: scroll;
    }

    div.schedule_body p.no_schedule {
      font-size: 32px;
      font-weight: bold;
      color: #E0DFDF;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }

    ul {
      list-style: none;
      padding: 0;
    }
    div.detail_block {
      width: 450px;
      height: 150px;
      border: 1px solid black;
      margin-top: 20px;
      font-size: 0;
      box-shadow: 0 0 6px;
      border-radius: 4px;
    }
    div.detail_info{
      border-top: 1px solid black;
      display: block;
      width: 100%;
      height: calc(100% -80px);
      font-size: 16px;
    }
    div.detail_time{
     display: inline-block;
     width: calc(100% - 120px);
     height: 100%;
     font-size: 16px;
     text-align: center;
    }
    div.detail_img{
      display: inline-block;
      vertical-align: bottom;
      width: 120px;
      height: 100%;
    }
    div.detail_img img{
      width:100%;
      height: 100%;
    }

    div.detail_top{
      width: 100%;
      height: 80px;
    }

    /* -----------------產品內容----------------- */
    div.product_content {
      width: 100%;
      height: 750px;
      position: relative;
      border: 1px solid black;
      border-radius: 4px;
    }

    div.product_header {
      width: 100%;
      height: 65px;
      position: relative;
      font-size: 32px;
      font-weight: bold;
      color: #343434;
      display: block;
      background-color: #E6903B;
    }

    div.product_header span.product_filter {
      position: absolute;
      top: 50%;
      left: 8%;
      transform: translate(-50%, -50%);
      font-size: 24px;
      font-weight: bold;
      color: #343434;
    }

    div.product_checkbox {
      width: 100%;
      height: 60px;
      position: relative;
      display: block;
      background-color: #E0DFDF;
      /* text-align: center; */
    }

    div.product_body {
      max-width: 100%;
      height: calc(100% - 60px - 65px);
    }

    div.body_content {
      overflow-y: scroll;
      width: 100%;
      height: 100%;
      max-width: 100%;
      max-height: 100%;
    }

    div.body_content div.card {
      margin-top: 20px;
      box-shadow: 0 0 6px;
    }

    div.btn_model button {
      width: 150px;
      float: right;
      margin: 20px 0 0 15px;
    }
    div.input_title{
      width: 100%;
      height: 75px;
      border-radius: 0 30px 30px 0;
      background-color: #556fff;
      font-size: 32px;
      font-weight: bold;
      color: white;
      text-align: center;
    }

    div.input_title input {
      
      border: 0px solid;
    }

    div#first_row div {
      height: 80px;
      margin-bottom: 10px;
    }

    span.love {
      float: right;
    }

    /* ---------------------搜尋欄---------------------------*/
    div.product_header div.search_area {
      width: 300px;
      white-space: nowrap;
      position: absolute;
      top: 50%;
      right: 0;
      transform: translate(-10%, -50%);
    }

    div.search_area input#search {
      width: 100%;
      height: 40px;
      font-size: 10px;
      color: #63717f;
      padding-left: 10px;
      /* border: solid 1px; */
      /* -webkit-border-radius: 5px;
  -moz-border-radius: 5px; */
      border-radius: 20px;
      display: block;
      border: solid 1px;
      /* -webkit-transition: background .55s ease;
  -moz-transition: background .55s ease;
  -ms-transition: background .55s ease;
  -o-transition: background .55s ease; */
      transition: background .55s ease;
    }

    div.search_area .icon {
      max-width: auto;
      position: absolute;
      top: 50%;
      right: 0;
      transform: translate(-50%, -50%);
      z-index: 1;
      color: #4f5b66;
    }

    .search_area input#search::-webkit-input-placeholder {
      color: #65737e;
    }

    .search_area input#search:-moz-placeholder {
      /* Firefox 18- */
      color: #65737e;
    }

    .search_area input#search::-moz-placeholder {
      /* Firefox 19+ */
      color: #65737e;
    }

    .search_area input#search:-ms-input-placeholder {
      color: #65737e;
    }

    .search_area input#search:hover,
    .search_area input#search:focus,
    .search_area input#search:active {
      outline: none;
      background: #f0f0f0;
    }

    label.label_area {
      font-size: 20px;
      margin-right: 50px;
    }

    label.label_area input {
      display: inline-block;
      top: 3px;
      width: 21px;
      height: 21px;
    }

    label.label_area a {
      display: inline-block;
    }

    div.checkbox_area {
      width: 100%;
      /* position: absolute;
      top: 50%;
      right: 50%;
      transform: translate(-50%, -50%); */
    }
    /*---------------------操控none-------------------------*/
    .-none{
      display: none;
    }
    .-on{
      display: none;
    }
  </style>
</head>

<body>
  <nav class="navbar navbar-light bg-light">
    <a class="navbar-brand" href="#">
      <!-- <img src="/docs/4.5/assets/brand/bootstrap-solid.svg" width="30" height="30"
                class="d-inline-block align-top" alt="" loading="lazy"> -->
      Tourism
    </a>
  </nav>

  <div class="container-fluid">
    <div class="row" id="first_row">
      <div class="col col-md-3" style="padding: 0;">
        <div class="input_title">
          <p></span>請輸入標題 <span><i class="fas fa-pen" style="font-size: 20px;"></i></p>
          <input type="text" class="title_update -none">
          
        </div>
      </div>
      <div class="col col-md-9">
        <div class="btn_model">
          <button id="btn_share" type="button" class="btn btn-primary btn-lg">分享行程</button>
          <button id="btn_Store" type="button" class="btn btn-primary btn-lg">儲存行程</button>
          <button id="btn_produce" type="button" class="btn btn-primary btn-lg">產生行程</button>
          <button id="btn_map" type="button" class="btn btn-primary btn-lg">地圖模式</button>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col col-md-1">
        <input class="update_date" type="date" name="date" style="width: 100%;">
        <ul class="sum_day" data-days="5">
          
        
        </ul>
        <div class="add_day">
          <button type="button" class="btn btn-primary btn-lg add_day">新增一天</button>
        </div>
      </div>
      <div class="col col-md-4">
        <div class="schedule_content">

          <div class="schedule_header">
            <p>Day1</p>
            <span class="plus"><i class="fas fa-plus fa-2x"></i></span>
          </div>
          <div class="schedule_body">
            <p class="no_schedule">請加入行程</p>
            <div class="schedule_body_content">
              <ul class="schedule_list">
                <!---------- 動態新增 ---------->
              </ul>
            </div>
          </div>
        </div>
      </div>
      <div class="col col-md-7">
        <div class="product_content">
          <div class="product_header">
            <span class="product_filter"><i class="fas fa-filter"></i>新增條件</span>
            <div class="search_area">
              <input type="search" id="search" placeholder="搜尋..." />
              <span class="icon"><i class="fa fa-search"></i></span>
            </div>
          </div>

          <div class="product_checkbox">
            <div class="checkbox_area">
              <div class="row" style="padding-left: 15px; padding-right: 15px;">
                <div class="col col-md-3">
                  <label class="label_area">
                    <input type="checkbox" name="product_group" value="all" class="checkbox_area">
                    <a>全部</a>
                  </label>
                </div>
                <div class="col col-md-3">
                  <label class="label_area">
                    <input type="checkbox" name="product_group" value="activities" class="checkbox_area">
                    <a>景點</a>
                  </label>
                </div>
                <div class="col col-md-3">
                  <label class="label_area">
                    <input type="checkbox" name="product_group" value="restaurant" class="checkbox_area">
                    <a>美食</a>
                  </label>
                </div>
                <div class="col col-md-3">
                  <label class="label_area">
                    <input type="checkbox" name="product_group" value="accommodation" class="checkbox_area">
                    <a>住宿</a>
                  </label>
                </div>
              </div>
            </div>
          </div>

          <div class="product_body">
            <div class="body_content" style="padding-left: 15px; padding-right: 15px;">
                <!---------- 動態新增 ---------->
            </div>
          </div>
        </div>

        </div>
      </div>
    </div>
  </div>


  <!-- Optional JavaScript -->
  <!-- jQuery first, then Popper.js, then Bootstrap JS -->
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
    integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous">
  </script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
    integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous">
  </script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
    integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous">
  </script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script>
    $(function(){
      init();

      $("div.body_content").on("click", "div.card", function(){
        $(this).closest("div.col-lg-4").toggle("-none");
        $("p.no_schedule").addClass("-none");
        let product_name = $(this).find("h5").html();
        let product_img = $(this).find("img").attr("src");
        let stay_time = $(this).find("p.stay_time").html();
        let insertHtml = 
          `<li class="schedule_block" style="padding-left: 15px; padding-right: 15px;">
                    <div class="row" style="padding-left: 15px; padding-right: 15px;">
                      
                      <div class="col col-md-10">
                        <div class="row" style="padding-left: 15px; padding-right: 15px; margin-top: 20px;">
                          <div class="col col-md-6">
                            <span><i class="fas fa-car-side fa-2x"></i></span>
                            <span>25KM</span>
                          </div>
                          <div class="col col-md-6">
                            <span><i class="fas fa-arrow-down fa-2x"></i></span>
                          </div>
                        </div>

                        <div class="detail_block">
                          <div class="detail_top">
                            <div class="detail_img">
                              <img src="`+ product_img +`">
                            </div>
                            <div class="detail_time">
                              <p style="font-size: 24px">`+ product_name +`</p>
                              <p><i class="far fa-clock"></i><span> 建議遊玩時間：`+ stay_time +`小時</span></p>
                            </div>
                          </div>
                          <div class="detail_info">
                            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Autem quisquam minima molestiae dolorem consequatur</p>
                          </div>
                        </div>

                      </div>

                      <div class="col col-md-1 align-self-center">
                        <span class="trash"><i class="fas fa-trash-alt fa-2x"></i></span>
                      </div>
                      <div class="col col-md-1 align-self-center">
                        <span><i class="fas fa-bars fa-2x"></i></span>
                      </div>
                    </div>

                  </li>`;

        let no_km = `<li class="schedule_block" style="padding-left: 15px; padding-right: 15px;">
                    <div class="row" style="padding-left: 15px; padding-right: 15px;">
                      <div class="col col-md-10">
                        <div class="detail_block">
                          <div class="detail_top">
                            <div class="detail_img">
                              <img src="`+ product_img +`">
                            </div>
                            <div class="detail_time">
                              <p style="font-size: 24px">`+ product_name +`</p>
                              <p><i class="far fa-clock"></i><span> 建議遊玩時間：`+ stay_time +`小時</span></p>
                            </div>
                          </div>
                          <div class="detail_info">
                            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Autem quisquam minima molestiae dolorem consequatur</p>
                          </div>
                        </div>
                      </div>
                      <div class="col col-md-1 align-self-center">
                        <span class="trash"><i class="fas fa-trash-alt fa-2x"></i></span>
                      </div>
                      <div class="col col-md-1 align-self-center">
                        <span><i class="fas fa-bars fa-2x"></i></span>
                      </div>
                    </div>
                  </li>`;

        if($("ul.schedule_list").find("li").hasClass("schedule_block")){
          $("ul.schedule_list").append(insertHtml); 
        }else{
          $("ul.schedule_list").append(no_km);   
        }
      });
        
      $("div.add_day").on("click", function(){
        let last_day_num = parseInt($("ul.sum_day").find("li").last().attr("data-sort")) + 1;
        let add_day = 
          `<li class="day`+last_day_num+`" data-sort="`+last_day_num+`">
            <button type="button" class="btn btn-primary btn-lg">Day`+last_day_num+`</button>
          </li>`;
        $("ul.sum_day").append(add_day);
      })
      let add_day ="";
      let day = $("ul.sum_day").attr("data-days");
          for(let i = 1; i <= day; i++){
            add_day += 
              `<li class="day`+ i +`" data-sort="`+ i +`">
                <button type="button" class="btn btn-primary btn-lg">Day`+i+`</button>
              </li>`;
          }
          $("ul.sum_day").append(add_day);

    });

    function init(){
      $.ajax({
        url: "http://localhost:8081/TDA101G1/project/JsonController",
        type: "GET",
        data: {"test": "test"},
        dataType: "json",
        beforeSend: function(){
          $("div.body_content").html('<li style="text-align: center;"><i class="fas fa-spinner fa-spin fa-3x"></i></li>');
        },
        success: function(data){
          let insertHtml = "";
          let items = data.products;              //products = server傳回的key
          console.log(items)
          $.each(items, function(index, value){
            console.log(value.product_Name)
            insertHtml += `<div class="col-6 col-md-6 col-lg-4">
                            <div class="card">
                              <img src="https://picsum.photos/200/100/?random=1" class="card-img-top">
                              <div class="card-body">
                                <h5 class="card-title">`+ value.product_Name +`</h5>
                                <p class="card-text"><i class="fas fa-map-marker-alt"></i><span> `+ value.product_Address +`</span></p>
                                <span>4.3</span>
                                <span><i class="fas fa-star"></i></span>
                                <span><i class="fas fa-star"></i></span>
                                <span><i class="fas fa-star"></i></span>
                                <span><i class="fas fa-star"></i></span>
                                <span><i class="fas fa-star"></i></span>
                                <span class="love"><i class="far fa-heart fa-2x"></i></span>
                              </div>
                              <div class="list-group list-group-flush">
                                <p class="list-group-item">`+ value.product_Intro +`</p>
                              </div>
                              <p class="stay_time -none">`+ value.product_Staytime+`</p>
                            </div>
                          </div>`
          });
         $("div.body_content").html("<div class='row'>" + insertHtml);


        },
        error: function(){
          alert("fail")
        }
      });
    }


  </script>
</body>

</html>